<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Object References and Comparison</title>
</head>

<body>
    <h1>Object References and Comparison</h1>
    <script>
        var person = {
            lname: "Jachu",
            fname: "Kotholla",
            address: {
                city: "Chittoor"
            }
        }

        // shallowCopy
        var newPerson = { ...person };

        // deepCopy

        var newPerson1 = JSON.parse(JSON.stringify(person));
        person.address.city = "Banglore";
        console.log(
            'shallow copy'
        );
        console.log(newPerson);
        console.log(
            'deep copy'
        );
        console.log(newPerson1);

        // Example Objects
        const obj1 = { name: "Jeswanth", age: 34 };
        const obj2 = { name: "Jachu", age: 32 };
        const obj3 = obj1; // Reference to obj1

        // 1. Comparing by Reference
        console.log("Comparing by Reference:");
        console.log(obj1 === obj2);
        console.log(obj1 === obj3);

        // 2. Comparing by Value using JSON.stringify
        console.log("\nComparing by Value using JSON.stringify:");
        console.log(
            JSON.stringify(obj1) === JSON.stringify(obj2)
        );

        // Note: JSON.stringify has limitations (e.g., doesn't handle circular references)

        // 3. Recursive Comparison Function
        function deepEqual(a, b) {
            if (a === b) return true; // Same reference
            if (typeof a !== "object" || typeof b !== "object" || a === null || b === null) return false;

            const keysA = Object.keys(a);
            const keysB = Object.keys(b);

            if (keysA.length !== keysB.length) return false;

            for (const key of keysA) {
                if (!deepEqual(a[key], b[key])) return false;
            }
            return true;
        }

        console.log("\nRecursive Comparison Function:");
        console.log(deepEqual(obj1, obj2)); // true (same values)
        console.log(deepEqual(obj1, obj3)); // true (same reference)

    </script>
</body>

</html>